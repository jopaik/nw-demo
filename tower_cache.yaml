---
- name: Tower Caching behaviour
  hosts: rtr2,rtr4
  gather_facts: no
  tags: normal
  
  tasks:
    - git:
        repo: https://github.com/termlen0/vars_repo
        dest: varsdir
      run_once: true
      delegate_to: localhost
        
    - include_vars:
        file: varsdir/common.yaml
        #depth: 1
        

    - debug: var=ospf_area

    - command: ls -l varsdir
      register: dirlisting

    - debug: var=dirlisting.stdout
        
      
    - eos_facts:
        gather_subset: "!config"

    - file:
        path: varsdir
        state: absent

    - command: ls -l varsdir
      ignore_errors: yes
      register: output

    - debug: var=output.stdout

        
   # - meta: clear_facts

    #- debug: var=ansible_net_interfaces
      

       

    

# - name: Tower Caching behaviour
#   hosts: rtr2, rtr4
#   gather_facts: no
#   tags: purge

#   tasks:
#     - eos_facts:
#         gather_subset: "!config"

#     - meta: clear_facts
      
